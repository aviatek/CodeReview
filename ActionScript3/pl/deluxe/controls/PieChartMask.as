package pl.deluxe.controls {     import flash.display.Sprite;                /**     * Class for displaying "pie chart" mask/object.     */    public class PieChartMask extends Sprite     {        private var _radius : Number;        private var _color : int;        private var _scale : Number;        /**         * Constructor.         *          * @param radius Circle radius.         * @param scale Initial scale (progress).         * @param color Piechart fill color.         */        public function PieChartMask(radius : Number = 20, scale : Number = 0, color : int = 0xff0000)        {            _radius = radius;            _color = color;            _scale = scale;            draw();        }                private function _drawArc(centerX : Number,                                   centerY : Number,                                   radius : Number,                                   arc : Number,                                   startAngle : Number = 0) : void        {              arc = arc > 360 ? 360 : arc;            arc = Math.PI/180 * arc;            startAngle *= Math.PI / 180;                        var delta   : Number = arc / 8;            var dist    : Number = radius / Math.cos(delta/2);            var angle   : Number = startAngle;            var ctrlX   : Number;            var ctrlY   : Number;            var anchorX : Number;            var anchorY : Number;                    graphics.moveTo(centerX, centerY);            graphics.lineTo(centerX + Math.cos(startAngle) * radius, centerY + Math.sin(startAngle) * radius);            for(var i:uint = 0; i < 8; i++)            {                angle += delta;                ctrlX = centerX + Math.cos(angle-(delta/2))*(dist);                ctrlY = centerY + Math.sin(angle-(delta/2))*(dist);                anchorX = centerX + Math.cos(angle) * radius;                anchorY = centerY + Math.sin(angle) * radius;                graphics.curveTo(ctrlX, ctrlY, anchorX, anchorY);            }                        graphics.lineTo(centerX, centerY);        }                /**         * Updates display.         */        public function draw() : void        {            graphics.clear();            graphics.beginFill(_color);            _drawArc(_radius, _radius, _radius, 360 * _scale, -90);            graphics.endFill();        }                public function get scale() : Number         {            return _scale;        }                /**         * Scale (position/progress) of the piechart. <code>0</code> - nothing, <code>1</code> - full circle.         */        public function set scale(value : Number) : void         {            _scale = value;            draw();        }    }}